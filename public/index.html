<html>

<head>
    <style>
        body {
            font-family: Consolas, monospace;
            font-size: 13px;
        }
        pre {font-family: Consolas, monospace}
        #detail pre {
            display: inline-block;
            border: 1px solid black;
            padding: 0.25em;
            margin: 0;
            margin-bottom: 0.5em;
            background-color: #9e9e9e1c;
        }
        code {
            background-color: #9e9e9e1c;
            border: 1px solid black;
            padding-left: 0.2em;
            padding-right: 0.2em;
        }
        h3 {padding-top: 0.5em; margin-top: 0.5em}
        h4 {margin-top: 0.5em}
        ul {padding-left: 1.5em}

        @media screen and (min-width: 800px) {
            body {
                display: flex;
                height: 100%;
                margin: 0;
            }
            #index {
                padding-left: 1em;
                padding-right: 1em;
                overflow-y: scroll;
            }
            #detail {
                margin-left: 1em;
                overflow-y: scroll;
                flex-grow: 1;
            }
        }
        @media screen and (max-width: 800px) {
            #index {
                border-bottom: 1px solid black;
            }
        }

    </style>
</head>

<body>

    <div id="index">

        <pre>$k [-p 1234] [f.k]                         / .z.i(pid) .z.x(arg) .z.e(env)

Verb                       Adverb                Noun              Atom List
:  set                     '  each               char  " ab"       `c   `C
+  plus        flip        /  over               name  ``a`b       `n   `N
-  minus       negate      \  scan               int   Ø 0 2       `i   `I
*  times       first       ': eachprior peach    float ø 2.3 π ∞   `f   `F
%  divide      inverse     /: eachright join|sv  date 2019.06.28   `d   `D .z.d
&  min|and     where       \: eachleft split|vs  time 12:34:56.789 `t   `T .z.t
|  max|or      reverse
<  less        up          System(1:""1:"prompt")
>  more        down        0: read/write line    list (2;3.4;`c)   `
=  equal       group       1: read/write byte    dict [a:2;b:`c]   `a   `A table
~  match       not         2: read/write data    expr :32+9*f%5    `0
!  dict|mod    key|enum    3: conn/set (.z.ms)   func {(+/x)%#x}   `1      .z.f
,  concat      enlist      4: http/get (.z.mg)
^  except      null
$  pad|cast    string      $[c;t;f] cond         \l f.k load
#  take|select count       #[t;c;b[;a]] select   \v [d] vars    \t[:n] x time milli
_  drop|delete floor       _[t;c;b[;a]] update   \f [d] fns     \u[:n] x trace micro
?  find|rand   uniq|rand   ?[x;i;f[;y]] splice   (\d [d] get[set]d)
@  index       type        @[x;i;f[;y]] amend    \cd [d] get[set]dir
.  apply       value       .[x;i;f[;y]] dmend    \lf [x] files \lc chars \ll lines

while[c;..];if[c;..];  

generate: i?(draw) -i?(deal) ?i(uniform) ?-i(normal) !i(enum) 
datetime: ymdhrstuv 2019.06.28+2m; day:7!; month:12!; bar5:5*-5!12:34
`year`month`day`hour`minute`second`millisecond`microsecond`nanosecond
0\:.z.d
0/:2024 1 1

ksql: select delete update; by from where;   [x]key [x]asc [x]dsc
aggr: count first last min max [x]sum [x]avg [x]var [x]dev [x]med
math: abs sin cos log exp sqrt prm cmb
util: in within bin like find

2way: ``j`k`b64`hex`csv`aes  e.g. json: `j?`j@`a`b!2 3
1way:  `p`m`crc`sha`rip`bad  e.g. hash: `sha@"crypto"

K:key k:key`k1     / public private
K key k key"hi"    / verify sign

\\ exit</pre>

<hr>

<p>Communities:</p>
<ul>
    <li><a href="https://groups.google.com/forum/#!forum/shaktidb">shakti google group</a> (official - for 'how to' queries)</li>
    <li><a href="https://chat.stackexchange.com/rooms/90748/the-k-tree">the k tree</a> <br>  write access: email <code>".@acegiklmnort"@7 13 12 4 4 0 10 5 10 1 5 9 2 6 8 0 3 11 9</code></li>
    <li><a href="https://www.reddit.com/r/apljk/">r/apljk</a></li>
</ul>

<p><a href="https://cs.nyu.edu/cs/faculty/shasha/papers/tutorial">Tutorial (based on old k7 version)</a></p>

<p><a href="https://gitlab.com/k7contrib/docs/">Contribute to these docs</a></p>

</div>

<div id="detail">
    <!-- <h3 id="template"></h3><pre></pre> -->
    <h3 id="group">Group</h3>
    <p>With a list, get back the indices at which each unique element appears:
    <pre> ="abracadabra"
a|0 3 5 7 10
b|1 8       
c|,4        
d|,6        
r|2 9</pre>
    <p>With a positive integer, generate an identity matrix:</p>
    <pre> =3
1 0 0
0 1 0
0 0 1</pre>
    <h3 id="enum">Enum</h3><pre>!3   / 0 1 2
!2 3 / (0 0 0 1 1 1;0 1 2 0 1 2)</pre>
    <h3 id="key">Key</h3>
    <pre>! [a:1;b:2] / `a`b</pre>
    
    <h3 id=".z.d">Current date <code>.z.d</code></h3>
    <pre>.z.d / 2019.04.02</pre>
    
    <h3 id=".z.t">Current time <code>.z.t</code></h3>
    <p>Greenwich Mean Time.</p>
    
    <pre>.z.t / 11:18:14.857</pre>
    
    <h3 id="table">Tables</h3>
    <pre>t: ([a:1;b:2];[a:3;b:4])   / Row-wise
u: +`a`b !    (1 3;2 4)    / Col-wise (flipped dict)
v:  `a`b ! /: (1 2;3 4)    / Row-wise, but de-duplicate headers using eachright

/ The tables match:
t~u
t~v

/ Break row-wise over multiple lines:
w: ([a:1;b:2]
    [a:3;b:4])

t~w

/ Break row-wise (condensed row format) over multiple lines:
x: `a`b!/:(1 2
           3 4)

t~x</pre>

    <h3 id="expr">exprs</h3>
    <p>WIP. See <a href="https://groups.google.com/d/msg/shaktidb/5N6VjsOBjoA/GjFgeP4yDAAJ">this forum post</a>.</p>

    <h3 id=".z.f">Recursion <code>.z.f</code></h3>
    <p>Use in a function definition to refer to the current function.</p>
    <pre>factorial: {$[x<2;1;x*.z.f[x-1]]} / fact 4: 24
/ Better: {*/1+!x}</pre>

    <h3 id="2way">Two-way conversions</h3>

    <p>Convert to with <code>`x@data</code> or <code>`x data</code>, where `x is the relevant name.</p>

    <p>Convert from with <code>`x?serialdata</code>.</p>

    <h4>Binary <code>`</code></h4>
    <pre>` "a" / 0x0161
` `a  / 0x0f6100
` 10  / 0x070a000000</pre>

    <h4>JSON <code>`j</code></h4>

    <pre>`j ([a:1;b:2];[a:"x";b:`z])
/ "[{\"a\":1,\"b\":2},{\"a\":\"x\",\"b\":\"z\"}]"</pre>

    <h4>KSON <code>`k</code></h4>

    <pre>`k 2*!3 / "0 2 4"
`k ([a:1;b:2];[a:"x";b:`z]) / "+[a:(1;\"x\");b:(2;`z)]"</pre>

    <h3 id="1way">One-way conversions</h3>

    <h4>Parse <code>`p</code></h4>
    <pre>`p "5*!3"
/ *     
/ 5     
/ (!:;3)</pre>

    <h4>Matrix display <code>`m</code></h4>

    <pre>d: 1 2 3
d
/ 1 2 3
`m d
/ 1
/ 2
/ 3</pre>

<script>

    const raw_elem = document.getElementById("index")
    function makeLink(word) {
        return "<a href=\"#" + word + "\">" + word + "</a>"
    }

    links = ["group", "enum", "key", "table", ".z.d", ".z.t", ".z.f", "expr", "1way", "2way"]

    for (let i in links) {
        const w = links[i]
        raw_elem.innerHTML = raw_elem.innerHTML.replace(w, makeLink(w))
    }
    
</script>

</body>

</html>
